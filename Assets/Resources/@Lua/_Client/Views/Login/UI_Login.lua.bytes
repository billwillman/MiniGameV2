local _M = _MOE.class("UI_Login", _MOE.BaseViewClass)

function _M:OnInit()
    --- 注册消息
    self:BindGSMsgNtf(_MOE.MsgIds.SM_LOGIN_RET, self._On_GS_SM_LOGIN_RET)
    self:AddButtonClick(self.bp.BtnLogin, self._OnBtnLogin)
end

function _M:_On_GS_SM_LOGIN_RET(msg, net)
    net:PrintMsg(msg)
    _MOE.SceneManager:SwitchScene(_MOE.SceneEnum.LobbyScene)
end

function _M:_OnBtnLogin()
    _MOE.GSClientModel:ConnectServer()
    _MOE.GSClientModel:SendMsg(_MOE.MsgIds.CM_Login, {userName = self.bp.EdtUserName.text})
end

return _M